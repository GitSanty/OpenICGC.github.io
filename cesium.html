<html lang="ca">

<head>
  <title>Terrenys ICGC</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="ICGC" />
  <meta name="description" content="Exemple Leaflet">
  <meta name="robots" content="index,follow">
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
  <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>
  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
  <style>
    body {
      margin: 0;
    }

    .soft {
      background-color: #f7f7f7
    }

    .titol {
      padding: 15px
    }

    .container {
      border: 1px solid #f7f7f7
    }
  </style>

</head>

<body>
  <div class="container">
    <div class="pro">
      <div class="titol">
        <strong>Exemple serveis terrenys ICGC </strong>
        <br>
        <div>
          <p>Bases de referència</p>
        </div>
      </div>
    </div>

    <iframe src="cesium_map.html" frameborder=0 width="100%" height="500"></iframe>
    <hr>
    <div class="soft">
    <pre><code class="prettyprint">
        &#x3C;html lang="ca"&#x3E;
        &#x3C;head&#x3E;
          &#x3C;title&#x3E;Terreny 5M&#x3C;/title&#x3E;
          &#x3C;meta charset="utf-8" /&#x3E;
          &#x3C;meta name="viewport" content="width=device-width, initial-scale=1.0"&#x3E;
          &#x3C;meta name="author" content="geostarters" /&#x3E;
          &#x3C;meta name="description" content="Terreny 5M ICGC"&#x3E;
          &#x3C;meta name="robots" content="index,follow"&#x3E;
          &#x3C;link rel="stylesheet" href="https://www.instamaps.cat/llibreries/cesium/Widgets/widgets.css" /&#x3E;
          &#x3C;script src="https://www.instamaps.cat/llibreries/cesium/Cesium.js"&#x3E;&#x3C;/script&#x3E;
          &#x3C;style&#x3E;
            #map {
              position: absolute;
              top: 0;
              left: 0;
              height: 100%;
              width: 100%;
              margin: 0;
              overflow: hidden;
              padding: 0;
              font-family: sans-serif;
            }
        
            #menu {
              position: absolute;
              z-index: 1000;
              background: #fff;
              padding: 10px;
              font-family: 'Open Sans', sans-serif;
              top: 5px;
              left: 5px;
              border-radius: 7px;
              -webkit-box-shadow: 5px 5px 5px -5px rgba(0, 0, 0, 0.75);
              -moz-box-shadow: 5px 5px 5px -5px rgba(0, 0, 0, 0.75);
              box-shadow: 5px 5px 5px -5px rgba(0, 0, 0, 0.75);
              font-size: 80%;
            }
        
            html {
              height: 100%;
            }
        
            body {
              padding: 0;
              margin: 0;
              overflow: hidden;
              height: 100%;
            }
          &#x3C;/style&#x3E;
          &#x3C;script&#x3E;
            var map;
        
            function initApp() {
              var terrain30M = new Cesium.CesiumTerrainProvider({
                url: 'https://assets.agi.com/stk-terrain/world'
              });
        
              var terrain5M = new Cesium.CesiumTerrainProvider({
                url: 'https://tilemaps.icgc.cat/terrenys/demextes/'
              });
        
              map = new Cesium.Viewer('map', {
                imageryProvider: new Cesium.createOpenStreetMapImageryProvider({
                  url: 'https://geoserveis.icgc.cat/icc_mapesmultibase/noutm/wmts/orto/GRID3857/',
                  fileExtension: 'jpeg',
                  maximumLevel: 19,
                  credit: 'Institut Cartogràfic i Geològic de Catalunya'
                }),
                timeline: false,
                navigationHelpButton: true,
                scene3DOnly: true,
                fullscreenButton: true,
                baseLayerPicker: false,
                homeButton: false,
                vrButton: true,
                navigationHelpButton: false,
                infoBox: true,
                sceneModePicker: false,
                animation: false,
                geocoder: false,
                sceneMode: Cesium.SceneMode.SCENE3D,
                terrainProvider: terrain5M       
              });
        
              map.camera.flyTo({
                destination: Cesium.Cartesian3.fromDegrees(1.70632, 42.20390, 16000),
                duration: 0,
                complete: function () {
                  setTimeout(function () {
                    map.camera.flyTo({
                      destination: new Cesium.Cartesian3(4729244.983163969, 143571.72049952167, 4266387.882877819),
                      orientation: {
                        direction: new Cesium.Cartesian3(-0.1689927316633657, -0.9849949286281356,
                          0.03502066849458571),
                        up: new Cesium.Cartesian3(0.7269595744661987, -0.10057128172725824, 0.6792754922589654)
                      },
                      easingFunction: Cesium.EasingFunction.LINEAR_NONE
                    });
                  }, 1000);
                }
              });
        
              var layerList = document.getElementById('menu');
              var inputs = layerList.getElementsByTagName('input');       
              function switchLayer(layer) {
                var layerId = layer.target.id;
                if (layerId == 'icgc') {
                  map.terrainProvider = terrain5M;
                } else {
                  map.terrainProvider = terrain30M;        
                }
              }       
              for (var i = 0; i &#x3C; inputs.length; i++) {
                inputs[i].onclick = switchLayer;
              }              
            }
          &#x3C;/script&#x3E;
        &#x3C;/head&#x3E;       
        &#x3C;body onLoad=initApp()&#x3E;
          &#x3C;div id='menu'&#x3E;
            &#x3C;input id='icgc' type='radio' name='rtoggle' value='icgc' checked='checked'&#x3E;
            &#x3C;label for='icgc'&#x3E;Terreny ICGC 5M&#x3C;/label&#x3E;
            &#x3C;input id='nasa' type='radio' name='rtoggle' value='nasa'&#x3E;
            &#x3C;label for='nasa'&#x3E;Terreny NASA 30M&#x3C;/label&#x3E;      
          &#x3C;/div&#x3E;
          &#x3C;div id="map"&#x3E;&#x3C;/div&#x3E;
        &#x3C;/body&#x3E;       
        &#x3C;/html&#x3E;
    </code></pre>
    </div>
  </div>
</body>
</html>
